<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:faces="jakarta.faces"
	xmlns:ui="jakarta.faces.facelets" xmlns:f="jakarta.faces.core"
	xmlns:h="jakarta.faces.html" xmlns:pt="jakarta.faces.passthrough"
	xmlns:cc="jakarta.faces.composite" xmlns:my="jakarta.faces.component"
	xmlns:c="jakarta.tags.core" xmlns:fn="jakarta.tags.functions"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/jsf-templates/layout.xhtml">


	<ui:define name="content">

		<h:form id="form">
			<div class="card">
				<h5>Task</h5>
				<p:growl id="messages" showDetail="true" />

				<p:toolbar>
					<p:toolbarGroup>
						<p:commandButton value="New" icon="pi pi-plus"
							actionListener="#{taskBean.openNew}"
							update=":dialogs:manage-task-content"
							oncomplete="PF('manageTaskDialog').show()"
							styleClass="ui-button-success" style="margin-right: .5rem">
							<p:resetInput target=":dialogs:manage-task-content" />
						</p:commandButton>

					</p:toolbarGroup>

				</p:toolbar>

				<p:dataTable id="taskTable" var="task" value="#{taskBean.taskList}"
					size="large">
					<p:column headerText="ID">
						<h:outputText value="#{task.id}" />
					</p:column>

					<p:column headerText="FirstName">
						<h:outputText value="#{task.description}" />
					</p:column>

					<p:column headerText="Validity">
						<p:badge value="#{task.validity}" size="xlarge"
							severity="#{task.severity}"></p:badge>
					</p:column>
					<p:column exportable="false">
						<p:commandButton icon="pi pi-pencil"
							update=":dialogs:manage-task-content"
							oncomplete="PF('manageTaskDialog').show()"
							styleClass="edit-button rounded-button ui-button-success"
							process="@this">
							<f:setPropertyActionListener value="#{task}"
								target="#{taskBean.selectedTask}" />
							<p:resetInput target=":dialogs:manage-task-content" />
						</p:commandButton>
						<p:commandButton class="ui-button-warning rounded-button"
							icon="pi pi-trash" process="@this"
							oncomplete="PF('deleteTaskDialog').show()">
							<f:setPropertyActionListener value="#{task}"
								target="#{taskBean.selectedTask}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</div>
		</h:form>


		<h:form id="dialogs">
			<p:dialog header="Task Details" showEffect="fade" modal="true"
				widgetVar="manageTaskDialog" responsive="true" width="800"
				height="400">
				<p:outputPanel id="manage-task-content" class="ui-fluid">
					<p:outputPanel rendered="#{not empty taskBean.selectedTask}">

						<div class="field col">
							<p:outputLabel for="ID">ID</p:outputLabel>
							<p:inputText id="ID" value="#{taskBean.selectedTask.id}"
								readonly="true" />
						</div>
						<div class="formgrid grid">
							<div class="field col">
								<p:outputLabel for="description">Description</p:outputLabel>
								<p:inputText id="description"
									value="#{taskBean.selectedTask.description}" required="true" />
							</div>
							<div></div>
						</div>
						<div class="formgrid grid">
							<div class="field col">
								<p:outputLabel for="userCreation">User Creation</p:outputLabel>
								<p:inputText id="userCreation"
									value="#{taskBean.selectedTask.userCreation}" readonly="true" />
							</div>
							<div class="field col">
								<p:outputLabel for="timestampCreation">Timestamp Creation</p:outputLabel>
								<p:inputText id="timestampCreation"
									value="#{taskBean.selectedTask.timestampCreation}" readonly="true"/>
							</div>
						</div>
						<div class="formgrid grid">
							<div class="field col">
								<p:outputLabel for="userUpdating">User Update</p:outputLabel>
								<p:inputText id="userUpdating"
									value="#{taskBean.selectedTask.userUpdating}" readonly="true" />
							</div>
							<div class="field col">
								<p:outputLabel for="timestampUpdating">Timestamp Update</p:outputLabel>
								<p:inputText id="timestampUpdating"
									value="#{taskBean.selectedTask.timestampUpdating}" readonly="true"/>
							</div>
						</div>

					</p:outputPanel>
				</p:outputPanel>
				<f:facet name="footer">
					<p:commandButton value="Save" icon="pi pi-check"
						actionListener="#{taskBean.saveTask}" update="manage-task-content"
						process="manage-task-content @this" />
					<p:commandButton value="Cancel" icon="pi pi-times"
						onclick="PF('manageTaskDialog').hide()"
						class="ui-button-secondary" type="button" />
				</f:facet>

			</p:dialog>

		</h:form>


	</ui:define>
</ui:composition>